@model IEnumerable<MyApp.Models.TokenItemViewModel> 

@{
    ViewData["Title"] = "Your reviews";
    var searchTxt = (string?)ViewBag.Query ?? "";
}


<h1 class="mb-3">@ViewData["Title"]</h1>

<partial name="~/Views/Shared/_UserRoleNav.cshtml" />

<div class="mb-3">
    <form method="get" asp-action="Tokens" class="d-flex gap-2">
        <input type="text" name="searchTxt" value="@searchTxt" class="form-control" placeholder="Search in Advice or Review text" />
        <button type="submit" class="btn btn-primary">Search</button>
    </form>
    @if (!string.IsNullOrEmpty(searchTxt))
    {
        <a asp-action="Tokens" class="btn btn-outline-secondary">Clear</a>
    }
</div>

@if (!Model.Any())
{
    <div class="alert alert-info">You haven't generated any reviews yet.'</div>
}
else
{
    <table class="table table-stripped align-middle">
        <thead>
            <tr>
                <th>Created</th>
                <th>Number</th>
                <th>Advice</th>
                <th>Review</th>
                <th>Completed</th>
            </tr>
        </thead>
        <tbody>
        @foreach(var rev in Model)
        {
            <tr>
                <td>@rev.DateCreated.ToString("yyyy-MM-dd HH:mm")</td>
                <td>@rev.Number</td>
                <td>@rev.Advice</td>
                <td>@rev.ReviewText</td>
                <td>@(rev.Completed ? "Yes" : "No")</td>
            </tr>        

        }
        </tbody>
    </table>
}


